#include <conio.h>

unsigned char missile1[] = {
0x01, 0x00,
0x01, 0x00,
0x01, 0x00,
0x05, 0x40,
0x05, 0x40,
0x15, 0x50,
0x10, 0x10,
0x15, 0x50,
0x55, 0x54,
0x50, 0x14,
0x50, 0x14,
0x40, 0x04,
0x40, 0x04,
0x40, 0x04,
};
unsigned char missile2[] = {
0x01, 0x00, 
0x01, 0x00, 
0x01, 0x00, 
0x05, 0x40, 
0x05, 0x40, 
0x15, 0x50, 
0x10, 0x10, 
0x15, 0x50, 
0x55, 0x54, 
0x50, 0x14, 
0x51, 0x14, 
0x41, 0x04, 
0x45, 0x44, 
0x44, 0x44, 
};
unsigned char radar1[] = {
0x00, 0x02, 0x80, 0x00,
0x00, 0x02, 0x80, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0x02, 0x80, 0xA0,
0x20, 0x02, 0x80, 0x08,
0x80, 0x02, 0x80, 0x02,
0x80, 0x02, 0x80, 0x02,
0x80, 0x00, 0x00, 0x02,
0x20, 0x00, 0x00, 0x08,
0x0A, 0x00, 0x00, 0xA0,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar2[] = {
0x00, 0x00, 0x00, 0x00,
0x02, 0x00, 0x28, 0x00,
0x02, 0x82, 0x82, 0x00,
0x00, 0xA8, 0x00, 0x80,
0x00, 0x20, 0x00, 0x80,
0x00, 0x8A, 0x02, 0x80,
0x02, 0x0A, 0x0A, 0x80,
0x08, 0x00, 0x2A, 0x00,
0x08, 0x02, 0xA8, 0x00,
0x0A, 0xAA, 0xA0, 0x00,
0x02, 0xAA, 0xA8, 0x00,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar3[] = {
0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x20, 0x00,
0x02, 0x80, 0x28, 0x00,
0x00, 0xA0, 0x2A, 0x00,
0x00, 0x28, 0xAA, 0x00,
0x00, 0x0A, 0xAA, 0x00,
0x00, 0x0A, 0xAA, 0x00,
0x00, 0x2A, 0xAA, 0x00,
0x0A, 0xAA, 0xA8, 0x00,
0x02, 0xAA, 0xA0, 0x00,
0x00, 0xAA, 0xA8, 0x00,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar4[] = {
0x00, 0x00, 0x00, 0x00,
0x02, 0x00, 0x28, 0x00,
0x02, 0x82, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x80,
0x00, 0x2A, 0xAA, 0x80,
0x00, 0xAA, 0xAA, 0x80,
0x02, 0xAA, 0xAA, 0x80,
0x0A, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xA8, 0x00,
0x0A, 0xAA, 0xA0, 0x00,
0x02, 0xAA, 0xA8, 0x00,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar5[] = {
0x00, 0x02, 0x80, 0x00,
0x00, 0x02, 0x80, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x2A, 0xAA, 0xAA, 0xA8,
0xAA, 0xAA, 0xAA, 0xAA,
0xAA, 0xAA, 0xAA, 0xAA,
0xAA, 0xAA, 0xAA, 0xAA,
0x2A, 0xAA, 0xAA, 0xA8,
0x0A, 0xAA, 0xAA, 0xA0,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar6[] = {
0x00, 0x00, 0x00, 0x00,
0x00, 0x28, 0x00, 0x80,
0x00, 0xAA, 0x82, 0x80,
0x02, 0xAA, 0xAA, 0x00,
0x02, 0xAA, 0xA8, 0x00,
0x02, 0xAA, 0xAA, 0x00,
0x02, 0xAA, 0xAA, 0x80,
0x00, 0xAA, 0xAA, 0xA0,
0x00, 0x2A, 0xAA, 0xA0,
0x00, 0x0A, 0xAA, 0xA0,
0x00, 0x2A, 0xAA, 0x80,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar7[] = {
0x00, 0x00, 0x00, 0x00,
0x00, 0x08, 0x00, 0x00,
0x00, 0x28, 0x02, 0x80,
0x00, 0xA8, 0x0A, 0x00,
0x00, 0xAA, 0x28, 0x00,
0x00, 0xAA, 0xA0, 0x00,
0x00, 0xAA, 0xA0, 0x00,
0x00, 0xAA, 0xA8, 0x00,
0x00, 0x2A, 0xAA, 0xA0,
0x00, 0x0A, 0xAA, 0x80,
0x00, 0x2A, 0xAA, 0x00,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char radar8[] = {
0x00, 0x00, 0x00, 0x00,
0x00, 0x28, 0x00, 0x80,
0x00, 0x82, 0x82, 0x80,
0x02, 0x00, 0x2A, 0x00,
0x02, 0x00, 0x08, 0x00,
0x02, 0x80, 0xA2, 0x00,
0x02, 0xA0, 0xA0, 0x80,
0x00, 0xA8, 0x00, 0x20,
0x00, 0x2A, 0x80, 0x20,
0x00, 0x0A, 0xAA, 0xA0,
0x00, 0x2A, 0xAA, 0x80,
0x00, 0x20, 0x08, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x00, 0xAA, 0xAA, 0x00,
0x0A, 0xAA, 0xAA, 0xA0,
0x0A, 0xAA, 0xAA, 0xA0,
};
unsigned char explosion1[] = {
0x0C, 0x00, 0x00, 0x00,
0x0F, 0x00, 0x00, 0x00,
0x00, 0x03, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x03, 0x3C,
0xC3, 0x0F, 0x00, 0x00,
0x00, 0x3F, 0xF0, 0x00,
0x00, 0x3F, 0xFC, 0x00,
0x00, 0x3F, 0xFC, 0xC0,
0x00, 0x3F, 0xC0, 0x00,
0x03, 0x00, 0xC0, 0x00,
0x00, 0x00, 0x03, 0x00,
0x00, 0xF0, 0x00, 0x00,
0xC0, 0xF0, 0x00, 0x00,
0xC0, 0x00, 0xC0, 0xC0,
0x00, 0x00, 0x00, 0x00,
};
unsigned char explosion2[] = {
0x3C, 0x00, 0x00, 0x00,
0x0C, 0x00, 0xC0, 0x3C,
0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0xC3,
0x0C, 0x0F, 0x00, 0x00,
0x00, 0xC3, 0x3C, 0x00,
0x00, 0xCF, 0xF3, 0x00,
0x00, 0x3C, 0xC3, 0x00,
0x00, 0x3C, 0x3C, 0x00,
0x03, 0x33, 0x30, 0x00,
0x03, 0xCC, 0xC0, 0x00,
0x00, 0x00, 0x0C, 0x00,
0x00, 0x00, 0x00, 0xC0,
0x00, 0x3C, 0x00, 0x00,
0x0C, 0xC0, 0x00, 0x00,
0x00, 0x00, 0x30, 0x03,
};
unsigned char explosion3[] = {
0x30, 0x00, 0x30, 0x03,
0x00, 0x00, 0x00, 0x00,
0x00, 0x30, 0x00, 0x00,
0xC0, 0x03, 0x00, 0xC0,
0x0C, 0x03, 0x0C, 0x00,
0x00, 0xC0, 0x00, 0x00,
0x00, 0xC0, 0x33, 0x00,
0x0C, 0x30, 0xC0, 0x00,
0x00, 0x30, 0x0C, 0x00,
0x30, 0xC0, 0x00, 0x3C,
0x03, 0x00, 0xC0, 0x00,
0x33, 0x03, 0x00, 0xC0,
0x00, 0x00, 0x00, 0x00,
0x00, 0xC0, 0x00, 0x00,
0x0C, 0x00, 0x00, 0x00,
0xC3, 0x00, 0x00, 0x03,
};
unsigned char explosion4[] = {
0x00, 0x00, 0x00, 0x00,
0x30, 0x00, 0x00, 0x03,
0x00, 0x30, 0x30, 0x03,
0xC0, 0x03, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00,
0x0C, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00,
0xC0, 0x00, 0x00, 0x3C,
0x00, 0x00, 0x00, 0x00,
0xC0, 0x03, 0x00, 0x00,
0x00, 0x00, 0x00, 0xC0,
0x00, 0x00, 0x00, 0x00,
0x00, 0x30, 0xC0, 0x00,
0x0C, 0x00, 0x00, 0x03,
0x00, 0x00, 0x00, 0x00,
0xC0, 0x00, 0x00, 0x00,
};
unsigned char monster[] = {
0xC0, 0x00, 0x30,
0xF3, 0xFC, 0xF0,
0xFF, 0xFF, 0xF0,
0x3F, 0xFF, 0xC0,
0xFF, 0xFF, 0xF0,
0xF3, 0xFC, 0xF0,
0xF0, 0xF0, 0xF0,
0xF0, 0xF0, 0xF0,
0xFC, 0xF3, 0xF0,
0x3F, 0xFF, 0xC0,
0x0F, 0xFF, 0x00,
0x0F, 0x0F, 0x00,
0x03, 0xFC, 0x00,
};
unsigned char nuke[] = {
0x02, 0x80,
0x08, 0x20,
0x22, 0x88,
0x22, 0x88,
0x08, 0x20,
0x02, 0x80,
0x08, 0x20,
0xAA, 0xAA,
};
unsigned char bomb1[] = {
0xFC, 0x00,
0x0F, 0x00,
0x3F, 0xF0,
0x0F, 0x00,
0xFC, 0x00,
0x00, 0x00,
};
unsigned char bomb2[] = {
0xC0, 0xC0,
0xCC, 0xC0,
0xFF, 0xC0,
0x3F, 0x00,
0x0C, 0x00,
0x0C, 0x00,
};
unsigned char ship[] = {
0xFF, 0xFF, 0xF0, 0x00, 0x00,
0x3F, 0xC0, 0x00, 0x00, 0x00,
0x0F, 0xFC, 0x00, 0x00, 0x00,
0x03, 0xFF, 0xC0, 0x00, 0x00,
0x00, 0xFF, 0xFF, 0x00, 0x00,
0x00, 0x3F, 0x03, 0xC0, 0x00,
0x00, 0x3F, 0xC0, 0xFF, 0x00,
0x00, 0x3F, 0xFF, 0xFF, 0xFF,
0x00, 0x3F, 0xFF, 0xFF, 0xC0,
0x00, 0xFF, 0xFF, 0x00, 0x00,
0x03, 0xFF, 0xC0, 0x00, 0x00,
0x0F, 0xFF, 0xFF, 0xFC, 0x00,
};

char *asset_names[] = {
"missile0",
"missile1",
"radar0",
"radar1",
"radar2",
"radar3",
"radar4",
"radar5",
"radar6",
"radar7",
"explosion0",
"explosion1",
"explosion2",
"explosion3",
"monster",
"nuke",
"bomb0",
"bomb1",
"ship",
};

unsigned char *assets[] = {
missile1,
missile2,
radar1,
radar2,
radar3,
radar4,
radar5,
radar6,
radar7,
radar8,
explosion1,
explosion2,
explosion3,
explosion4,
monster,
nuke,
bomb1,
bomb2,
ship,
};

unsigned int asset_sizes[] = {
sizeof(missile1) / sizeof(missile1[0]),
sizeof(missile2) / sizeof(missile2[0]),
sizeof(radar1) / sizeof(radar1[0]),
sizeof(radar2) / sizeof(radar2[0]),
sizeof(radar3) / sizeof(radar3[0]),
sizeof(radar4) / sizeof(radar4[0]),
sizeof(radar5) / sizeof(radar5[0]),
sizeof(radar6) / sizeof(radar6[0]),
sizeof(radar7) / sizeof(radar7[0]),
sizeof(radar8) / sizeof(radar8[0]),
sizeof(explosion1) / sizeof(explosion1[0]),
sizeof(explosion2) / sizeof(explosion2[0]),
sizeof(explosion3) / sizeof(explosion3[0]),
sizeof(explosion4) / sizeof(explosion4[0]),
sizeof(monster) / sizeof(monster[0]),
sizeof(nuke) / sizeof(nuke[0]),
sizeof(bomb1) / sizeof(bomb1[0]),
sizeof(bomb2) / sizeof(bomb2[0]),
sizeof(ship) / sizeof(ship[0]),
};

unsigned int asset_cols[] = {
2, // missile0
2, // missile1
4, // radar0
4, // radar1
4, // radar2
4, // radar3
4, // radar4
4, // radar5
4, // radar6
4, // radar7
4, // explosion0
4, // explosion1
4, // explosion2
4, // explosion3
3, // monster
2, // nuke
2, // bomb0
2, // bomb1
5, // ship
};

unsigned int num_assets = sizeof(assets) / sizeof(assets[0]);

void process_asset(const char *name, unsigned char *data, unsigned int size, unsigned int cols){
    int r, c, b, b0, b1, i, j, k;
    char ascii[16][129];
    char ascii1[129];
    int rows = size / cols;

    printf("%sA:\n", name);
    for(r = 0; r < rows; r++) {
        i = 0;
        printf(".byte ");
        for(c = 0; c < cols; c +=2) {
            b0 = data[cols*r+c];
            b1 = data[cols*r+c+1];
            b0 = 
                (b0 & 0b01000000) << 1 | 
                (b0 & 0b00010000) << 2 | 
                (b0 & 0b00000100) << 3 | 
                (b0 & 0b00000001) << 4 |
                (b0 & 0b10000000)      | 
                (b0 & 0b00100000) << 1 | 
                (b0 & 0b00001000) << 2 | 
                (b0 & 0b00000010) << 3;
            if(c != cols-1) {
                b1 = 
                    (b1 & 0b10000000) >> 4 | 
                    (b1 & 0b00100000) >> 3 | 
                    (b1 & 0b00001000) >> 2 | 
                    (b1 & 0b00000010) >> 1 |
                    (b1 & 0b01000000) >> 3 | 
                    (b1 & 0b00010000) >> 2 | 
                    (b1 & 0b00000100) >> 1 | 
                    (b1 & 0b00000001);
            } else {
                b1 = 0;
            }
            b = b0 | b1;
            printf("$%02X%s", b, c+1 < cols ? ", " : "        ; ");
            for(j = 7; j >= 0; j--) {
                if(b & (1 << j)) {
                    ascii[r][i++] = 'X';
                } else {
                    ascii[r][i++] = '-';
                }
            }
        }
        ascii[r][i] = '\0';
        printf("%s\n", ascii[r]);
    }
    printf("\n");

    printf("%sU:\n", name);
    for(r = 0; r < rows; r++) {
        i = 0;
        k = 0;
        c = 4;
        b = 0;
        printf(".byte ");
        while(ascii[r][k]) {
            b |= (ascii[r][k] == 'X' ? 1 : 0) << (c-1);
            if(!(--c)) {
                printf("$%02X%s", b, ascii[r][k+1] ? ", " : "        ; ");
                for(j = 7; j >= 0; j--) {
                    if(b & (1 << j)) {
                        ascii1[i++] = 'X';
                    } else {
                        ascii1[i++] = '-';
                    }
                }
                b = 0;
                c = 8;
            }
            k++;
        }
        if(c != 8) {
            printf("$%02X%s", b, "        ; ");
            for(j = 7; j >= 0; j--) {
                if(b & (1 << j)) {
                    ascii1[i++] = 'X';
                } else {
                    ascii1[i++] = '-';
                }
            }
        }
        ascii1[i] = '\0';
        printf("%s\n", ascii1);
    }

}

int main() {
    int i;

    for(i = 0; i < num_assets; i++) {
        process_asset(asset_names[i], assets[i], asset_sizes[i], asset_cols[i]);
    }
    return 0;
}